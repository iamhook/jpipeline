### JPipeline
JPipeline - это аналог [Node-RED](https://github.com/node-red/node-red), написанный на Java.  
Представляет собой систему (сервер + клиент), предоставляющую возможность 
программирования потоков данных в графическом режиме.

<img src="../assets/images/main_menu.png" alt="Main menu" width="600"/>

## Потоковое программирование
Потоковое программирование (Flow-based programming, FBP) – это парадигма программирования, которая 
определяет приложения как сети процессов, представляющих собой 
«черные ящики» (узлы), которые обмениваются данными по предопределенным 
соединениям (дугам) посредством передачи сообщений. Узлы могут иметь входы и выходы. 
Принимая сообщение на выход, узел может произвести некоторые вычисления и 
отправить новое сообщение на выход. Эти узлы можно беско-нечно связывать 
между собой для формирования различных приложений без необходимости внутреннего изменения. 

## Модули
1. jpipeline-executor (`Исполнитель`) - серверное приложение, выполняющее потоки
2. jpipeline-manager (`Менеджер`) - серверное приложение, управляющее исполнителем
3. jpipeline-javafx-client (`Клиент`) - настольное приложение с пользовательским интерфейсом

| ![Диаграмма развертывания](../assets/images/deployment_diagram.png?raw=true) | 
|:--:| 
| *Диаграмма развертывания* |

## Процесс работы
### Экран входа
При запуске клиентского приложения открывается экран входа – здесь можно ввести данные для подключения 
к серверной части, при успехе данные сохраняются на диск для упрощения последующих подключений.

| ![Экран входа](../assets/images/login_menu.png?raw=true) | 
|:--:| 
| *Экран входа* |

### Основной экран
После успешного входа мы сразу попадаем на главный экран приложения.   
В центральной его части отображается рабочая область с расположенными на ней узлами – 
это графическое представление конфигурации, которую мы получили с сервера.
Узлы можно перемещать, удалять, соединять между собой и редактировать их свойства, пример меню редактирования будет представлен далее.  
В левой части расположено меню со списком доступных типов узлов. При нажатии на один из них он попадает на рабочую область.  
* удаление узла - клик `ПКМ` по узлу
* удаление связи - клик `ПКМ` по связи
* редактирование узла - двойной клик `ЛКМ` по узлу

В нижней части экрана находится панель инструментов, которая содержит кнопки для управления и статусы серверных приложений:
1. Кнопка `Deploy` - отправляет текущую конфигурацию потока на сервер и перезапускает поток
2. Кнопка `Reset` - сбрасывает текущую конфигурацию до той, что запущена на сервере в данный момент
3. Кнопка `Debug` - открывает меню отладки
4. Кнопка `Login` - открывает меню входа

| ![Основной экран](../assets/images/main_menu.png?raw=true) | 
|:--:| 
| *Основной экран* |

### Меню редактирования
При двойном клике `ЛКМ` по узлу на рабочей области открывается меню редактирования.  
Разработчик узла пишет меню редактирования сам, есть несколько способов:
1. Упрощенный `FXML`, поддерживаются только текстовые поля и выпадающие списки (пример - [ SplitNode](jpipeline-standart-nodes/src/main/resources/node-resources/SplitNode))
2. `FXML` + `Groovy` (deprecated) - произвольная разметка с помощью FXML и контроллер, написанный на Groovy (пример - [SwitchNode](jpipeline-standart-nodes/src/main/resources/node-resources/SwitchNode))
3. `HTML` + `JavaScript` (WebView) - используется HTML-файл, содержащий всю логику по отрисовке и обработке меню (пример - [SwitchNode](jpipeline-standart-nodes/src/main/resources/node-resources/SwitchNode))

| ![Меню редактирования SqlSelectNode](../assets/images/edit_menu_example.png?raw=true) | 
|:--:| 
| *Меню редактирования SqlSelectNode* |

| ![Меню редактирования SplitNode](../assets/images/edit_menu_example_2.png?raw=true) | 
|:--:| 
| *Меню редактирования SplitNode* |

### Меню отладки

По-умолчанию любое сообщение, приходящее на вход узлу `DebugNode`, будет отправлено в меню отладки.
Помимо этого, в классе [`Node`](jpipeline-common/src/main/java/com/jpipeline/common/entity/Node.java) 
в качестве логгера используется экземпляр класса [`JLogger`](jpipeline-common/src/main/java/com/jpipeline/common/util/JLogger.java), 
поэтому при использовании переменной `log` в вашем узле все вызовы `log.error()` и `log.debug() `
будут выводить сообщение так же и в меню отладки в пользовательском интерфейсе.

| ![Меню отладки](../assets/images/debug_menu.png?raw=true) | 
|:--:| 
| *Меню отладки* |


